<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script src="lib/three.js"></script>
<script>
    let renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);
    let scene = new THREE.Scene();
    // let camera = new THREE.PerspectiveCamera(1, window.innerWidth / window.innerHeight, 0.1, 10000);
    let camera = new THREE.OrthographicCamera(-window.innerWidth / 2, window.innerWidth /2, window.innerHeight / 2, - window.innerHeight /2, 0.1, 10000);
    // camera.position.x = 500;
    camera.position.y = 200;
    // camera.position.z = 100;
    camera.lookAt(scene.position);
    const createSprite = function (resPath) {
        let spriteMap =new THREE.TextureLoader().load(resPath);
        let spriteMatrial = new THREE.SpriteMaterial({map: spriteMap, color: 0xffffff});
        let sp = new THREE.Sprite(spriteMatrial);
        sp.scale.set(100,100,100);
        return sp;
    };
    let sprite = createSprite('./images/apple_0.png');
    scene.add(sprite);
    sprite.position.x = 100;
    sprite.position.z = -100;
    sprite.position.y = 100;


    // let light = new THREE.DirectionalLight();
    // scene.add(light);



    // let canvas = document.createElement('Canvas');
    // canvas.width = 1024;
    // canvas.height = 512;
    // let bitmap = canvas.getContext('2d');
    // bitmap.font = 'Normal 40px Arial';
    // bitmap.textAlign = 'center';
    // bitmap.fillStyle = 'rgba(255,255,255,0.75)';
    // bitmap.fillText(text, WIDTH / 2, HEIGHT / 2);
    // let texture = new THREE.Texture(canvas);
    // texture.needsUpdate = true;
    // let material = new THREE.MeshBasicMaterial({map: texture});
    // material.transparent = true;
    // // let planeGeometry = new THREE.PlaneGeometry(WIDTH, HEIGHT);
    // // let plane = new THREE.Mesh(planeGeometry, material);
    // let plane = new THREE.Sprite(material);
    //
    // // plane.rotation.y =  Math.PI * 0.5;
    // plane.setText = function (text) {
    //     bitmap.clearRect(0, 0, WIDTH, HEIGHT);
    //     bitmap.fillText(text, WIDTH / 2, HEIGHT / 2);
    //     texture.needsUpdate = true;
    // };
    // return plane;

    const createTextSprite = function (t) {
        let canvas = document.createElement('Canvas');
        canvas.width = 256;
        canvas.height = 256;
        let bitmap = canvas.getContext('2d');
        bitmap.font = 'Normal 40px Arial';
        bitmap.textAlign = 'center';
        bitmap.fillStyle = 'rgba(255,255,255,1)';
        bitmap.fillText('Hello World', window.innerWidth / 2, window.innerHeight / 2);
        let texture = new THREE.Texture(canvas);
        texture.needsUpdate = true;
        let material = new THREE.SpriteMaterial({map: texture});
        material.transparent = true;
        let sp = new THREE.Sprite(material);

        sp.setText = function (text) {
            bitmap.clearRect(0,0,window.innerWidth, window.innerHeight);
            bitmap.fillText(text, 128, 128);
            texture.needsUpdate = true;
        };
        sp.setText(t);
        sp.scale.set(500,500,500);
        return sp;
    };

    let text = createTextSprite('Hello World');
    scene.add(text);

    //
    let cube = new THREE.Mesh(new THREE.BoxGeometry(100,100,100), new THREE.MeshNormalMaterial());
    scene.add(cube);
    cube.position.x = -200;
    cube.position.y = 100;


    let animate = function () {
        renderer.render(scene, camera);
        requestAnimationFrame(animate);
    };
    animate();
</script>
</body>
</html>